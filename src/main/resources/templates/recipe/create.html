<!DOCTYPE html>
<html lang="en" layout:decorate="~{/layouts/layout}">
  <th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/recipe_create.css}" />
  </th:block>

  <div layout:fragment="content">
    <div class="container mt-5">
      <div id="webcrumbs">
        <div class="w-[900px] bg-white shadow-lg rounded-lg p-8">
          <div
            class="flex justify-between items-center mb-6 bg-neutral-100 p-4 rounded-md"
          >
            <h2 class="text-lg font-title">레시피 등록</h2>
            <!-- 모달창 활성화 버튼 -->
            <button
              type="button"
              class="btn btn-success"
              data-bs-toggle="modal"
              data-bs-target="#recipeModal"
            >
              레시피 등록안내
            </button>
            <!-- 모달 -->
            <div
              class="modal fade"
              id="recipeModal"
              tabindex="-1"
              aria-labelledby="modalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="modalLabel">
                      레시피 등록 확인
                    </h5>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body">레시피를 등록하시겠습니까?</div>
                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-secondary"
                      data-bs-dismiss="modal"
                    >
                      취소
                    </button>
                    <button type="button" class="btn btn-primary">등록</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <form>
            <!-- 레시피 제목 및 요약 -->
            <div class="form-section">
              <div class="space-y-4">
                <div class="p-4 bg-neutral-50 rounded-lg">
                  <div class="grid grid-cols-3 gap-4 items-center">
                    <label for="recipeTitle" class="text-neutral-950 form-label"
                      >레시피 제목</label
                    >
                    <input
                      type="text"
                      id="recipeTitle"
                      placeholder="예) 소고기 만두국 끓이기"
                      class="col-span-2 border-neutral-300 border rounded-md px-3 py-2 form-control"
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="form-section">
              <div class="p-4 bg-neutral-50 rounded-lg">
                <div class="grid grid-cols-3 gap-4 items-center">
                  <label
                    for="recipeDescription"
                    class="text-neutral-950 form-label"
                    >요리소개</label
                  >
                  <textarea
                    id="recipeDescription"
                    placeholder="요리에 대한 간단한 설명을 적어주세요."
                    class="form-control col-span-2 border-neutral-300 border rounded-md px-3 py-2"
                    rows="4"
                  ></textarea>
                </div>
              </div>
            </div>

            <!-- 카테고리 -->
            <div class="form-section">
              <div class="p-4 bg-neutral-50 rounded-lg">
                <div class="grid grid-cols-3 gap-4 items-center">
                  <label for="category" class="form-label text-neutral-950"
                    >카테고리</label
                  >
                  <select
                    id="category"
                    class="form-select col-span-2 border-neutral-300 border rounded-md px-3 py-2"
                  >
                    <option value="">선택</option>
                    <option value="한식">한식</option>
                    <option value="양식">양식</option>
                    <option value="중식">중식</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- 요리정보 -->
            <div class="form-section">
              <div class="p-4 bg-neutral-50 rounded-lg">
                <div class="flex gap-4 items-center">
                  <label for="cookingInfo" class="form-label text-neutral-950"
                    >요리정보</label
                  >
                  <div class="row">
                    <div class="col-md-3">
                      <select
                        id="servings"
                        class="form-select border-neutral-300 border rounded-md px-3 py-2"
                      >
                        <option value="">인원 선택</option>
                        <option value="1">1인분</option>
                        <option value="2">2인분</option>
                      </select>
                    </div>
                    <div class="col-md-3">
                      <select
                        id="time"
                        class="form-select border-neutral-300 border rounded-md px-3 py-2"
                      >
                        <option value="">시간 선택</option>
                        <option value="10">10분 이내</option>
                        <option value="30">30분 이내</option>
                      </select>
                    </div>
                    <div class="col-md-3">
                      <select
                        id="difficulty"
                        class="form-select border-neutral-300 border rounded-md px-3 py-2"
                      >
                        <option value="">난이도 선택</option>
                        <option value="쉬움">쉬움</option>
                        <option value="보통">보통</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- {/* Divider */} -->
            <div class="border-t border-neutral-300 my-4"></div>

            <!-- 재료 정보 -->
            <div class="form-section">
              <div class="p-4 bg-neutral-50 rounded-lg">
                <h3 class="text-neutral-950 font-title mb-2">재료 정보</h3>

                <div id="ingredientsContainer">
                  <div class="space-y-2">
                    <div class="ingredient-input">
                      <div class="grid grid-cols-4 gap-4 items-center">
                        <input
                          type="text"
                          placeholder="재료 제목"
                          class="border-neutral-300 border rounded-md px-3 py-2"
                        />
                        <input
                          type="text"
                          class="form-control border-neutral-300 border rounded-md px-3 py-2"
                          placeholder="재료명"
                        />
                        <input
                          type="text"
                          class="form-control border-neutral-300 border rounded-md px-3 py-2"
                          placeholder="용량 (예: 10g)"
                        />
                      </div>
                    </div>
                    <div class="ingredient-input">
                      <div class="grid grid-cols-4 gap-4 items-center">
                        <input
                          type="text"
                          placeholder="재료 제목"
                          class="border-neutral-300 border rounded-md px-3 py-2"
                        />
                        <input
                          type="text"
                          class="form-control border-neutral-300 border rounded-md px-3 py-2"
                          placeholder="재료명"
                        />
                        <input
                          type="text"
                          class="form-control border-neutral-300 border rounded-md px-3 py-2"
                          placeholder="용량 (예: 10g)"
                        />
                      </div>
                    </div>
                  </div>
                </div>
                <button
                  type="button"
                  id="addIngredientBtn"
                  class="btn btn-primary mt-2 bg-green-500 text-white px-4 py-2 rounded-md"
                >
                  추가
                </button>
                <p class="text-sm text-neutral-500 mt-4">
                  최소 재료 2개는 넣어야 합니다. 추가 버튼 클릭 시 새로운 행이
                  추가됩니다. (최대 50줄)
                </p>
              </div>
            </div>

            <!-- {/* Divider */} -->
            <div class="border-t border-neutral-300 my-4"></div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const addIngredientBtn = document.getElementById("addIngredientBtn");
      const ingredientsContainer = document.getElementById(
        "ingredientsContainer"
      );

      addIngredientBtn.addEventListener("click", () => {
        const ingredientInput = document.createElement("div");
        ingredientInput.className = "ingredient-input";

        ingredientInput.innerHTML = `
        <div class="grid grid-cols-4 gap-4 items-center">
          <input type="text" placeholder="재료 제목" class="border-neutral-300 border rounded-md px-3 py-2" />
          <input type="text" class="form-control border-neutral-300 border rounded-md px-3 py-2" placeholder="재료명" />
          <input type="text" class="form-control border-neutral-300 border rounded-md px-3 py-2" placeholder="용량 (예: 10g)" />
        </div>
      `;

        // 재료 입력 추가 (최대 50개)
        if (ingredientsContainer.children.length < 50) {
          ingredientsContainer.appendChild(ingredientInput);
        } else {
          alert("재료는 최대 50개까지 추가할 수 있습니다.");
        }
      });

      // 모달 버튼 클릭 시 모달 열기
      const recipeModal = document.querySelector("#recipeModal");

      if (recipeModal) {
        const modalBtn = document.querySelector('[data-bs-toggle="modal"]');
        modalBtn.addEventListener("click", function () {
          recipeModal.show();
        });
      }
    });
  </script>
</html>
