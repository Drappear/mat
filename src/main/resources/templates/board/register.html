<!DOCTYPE html>
<html
  lang="ko"
  xmlns:th="http://www.thymeleaf.org"
  layout:decorate="~{/layouts/layout}"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>New Post</title>
    <!-- CSS 파일 경로 지정 -->
    <link rel="stylesheet" th:href="@{/css/board/register.css}" />
  </head>
  <body>
    <div layout:fragment="content">
      <div class="write-content">
        <div class="write-article">
          <!-- 글 작성 폼 -->
          <form
            th:action="@{/board/register}"
            method="POST"
            enctype="multipart/form-data"
            class="blog-article"
          >
            <!-- CSRF 토큰 -->
            <input type="hidden" name="_csrf" th:value="${_csrf.token}" />

            <div class="write-article-header">
              <p class="new-post">New Post</p>

              <!-- 카테고리 선택 -->
              <div class="form-group">
                <label for="category"></label>
                <select
                  id="category"
                  name="categoryId"
                  class="form-control"
                  required
                >
                  <option value="" disabled selected>Category</option>
                  <option
                    th:each="category : ${categories}"
                    th:value="${category.boardCNo}"
                    th:text="${category.name}"
                    th:selected="${boardDto.categoryId == category.boardCNo}"
                  ></option>
                </select>
              </div>

              <!-- 제목 입력 -->
              <div class="form-group">
                <label for="title"></label>
                <input
                  type="text"
                  id="title"
                  name="title"
                  class="form-control"
                  placeholder="제목을 입력하세요"
                  th:value="${boardDto.title}"
                  required
                />
              </div>
            </div>

            <!-- 이미지 업로드 -->
            <div class="article-img">
              <label for="image"></label>
              <input
                type="file"
                id="image"
                name="image"
                class="form-control"
                accept="image/jpeg, image/png, image/gif"
              />
              <!-- 기존 이미지 표시 -->
              <div
                th:if="${boardDto.imageFileName != null}"
                class="existing-image"
              >
                <p>
                  현재 이미지: <span th:text="${boardDto.imageFileName}"></span>
                </p>
              </div>
            </div>

            <!-- 본문 입력 -->
            <div class="write-article-body">
              <div class="form-group">
                <label for="content">본문</label>
                <textarea
                  id="content"
                  name="content"
                  rows="10"
                  class="form-control"
                  placeholder="게시물에 음란물, 타인의 권리 침해, 명예 훼손이 포함된 경우, 별도의 통보 없이 제재를 받을 수 있습니다."
                  th:text="${boardDto.content}"
                  required
                ></textarea>
              </div>
            </div>

            <!-- 작성 버튼 -->
            <div class="form-group text-center">
              <button type="submit" class="btn btn-primary submit-btn">
                Post
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- JavaScript 라이브러리 -->
    <script th:src="@{https://code.jquery.com/jquery-1.10.2.min.js}"></script>
    <script
      th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js}"
    ></script>
  </body>
</html>
